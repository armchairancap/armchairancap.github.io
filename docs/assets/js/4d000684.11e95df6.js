"use strict";(self.webpackChunkaa=self.webpackChunkaa||[]).push([[5869],{42832:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var r=s(86070),i=s(27468);const t={sidebar_position:2},o="Privacy and security",a={id:"haven-admin-guide/privacy-and-security",title:"Privacy and security",description:"Haven administrators need to consider the privacy and security implications for their users.",source:"@site/docs/haven-admin-guide/privacy-and-security.md",sourceDirName:"haven-admin-guide",slug:"/haven-admin-guide/privacy-and-security",permalink:"/docs/haven-admin-guide/privacy-and-security",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Get started for Haven admins",permalink:"/docs/haven-admin-guide/get-started"},next:{title:"Hardware and software requirements",permalink:"/docs/haven-admin-guide/hw-sw-requirements"}},c={},d=[{value:"Haven from user&#39;s perspective",id:"haven-from-users-perspective",level:2},{value:"Client&#39;s outgoing network connections",id:"clients-outgoing-network-connections",level:2},{value:"Protect Haven Web server from being compromised or taken over",id:"protect-haven-web-server-from-being-compromised-or-taken-over",level:2},{value:"Avoid excessive logging",id:"avoid-excessive-logging",level:2}];function l(e){const n={a:"a",em:"em",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"privacy-and-security",children:"Privacy and security"}),"\n",(0,r.jsx)(n.p,{children:"Haven administrators need to consider the privacy and security implications for their users."}),"\n",(0,r.jsx)(n.p,{children:"Some of the main objectives and concerns are shared below."}),"\n",(0,r.jsx)(n.p,{children:"But before that, let's see how our deployment choices reflect on Haven users."}),"\n",(0,r.jsx)(n.h2,{id:"haven-from-users-perspective",children:"Haven from user's perspective"}),"\n",(0,r.jsx)(n.p,{children:"From the user's perspective, Haven infrastructure consists of two types of servers:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Haven Web server (can be self-hosted, doesn't handle and not in path of messaging data)"}),"\n",(0,r.jsxs)(n.li,{children:["xx Network nodes (hundreds of community-run gateway nodes (see ",(0,r.jsx)(n.a,{href:"https://dashboard.xx.network",children:"xx Dashboard"}),") which mix, receive and send client-encrypted data)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Connecting to both of these is required to be able to send and receive messages on the xx Network."}),"\n",(0,r.jsx)(n.p,{children:"How do different approaches compare?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use 3rd party's instance of Haven Web server","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Regular approach: exposes client's IP to the Web server operator and to xx Network gateways."}),"\n",(0,r.jsxs)(n.li,{children:["High privacy approach: client may use Socks5 proxy to access Haven Web app ",(0,r.jsx)(n.em,{children:"and"})," the xx Network gateways. This option hides the client's IP from the Web server operator and also from the community-operated xx Network gateways."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Use self-hosted Haven Web server","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enhanced privacy: this is better than regular approach because the client's IP is known only to community-operated xx Network gateways."}),"\n",(0,r.jsxs)(n.li,{children:["Top privacy: host own Web server instance ",(0,r.jsx)(n.em,{children:"and"})," access the xx Network gateways through the The Onion Router (aka Tor; more secure, but slower) or a VPN (less secure, but faster). This doesn't identify you to Haven Web site owner or 3rd parties as a Haven user and also hides your client IP from the xx Network gateways. Because all traffic is routed via Tor (or Arti) or a VPN, user experience may be impacted depending on use case and network overheads."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If you recall this diagram, a proxy or VPN don't need to encrypt your data (it is encrypted client-side in Haven) or hide connections among chat participants (that's done by xx Network) - it only hides user's 'IP from xx Network and Haven Web app server."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Haven clients, servers and xx Network",src:s(53127).A+"",width:"501",height:"282"})}),"\n",(0,r.jsx)(n.p,{children:"As a Haven administrator we need to check user's requirements and preferences and deploy what's best for our user."}),"\n",(0,r.jsx)(n.p,{children:"Another look at Haven client's connections to xx Network's cMix service:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Haven client&#39;s connection to xx Network cMix",src:s(79976).A+"",width:"501",height:"282"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Option 1: route connections via a proxy","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pros: hides client's IP address from xx Network's gateway nodes"}),"\n",(0,r.jsx)(n.li,{children:"Cons: higher latency, possible timeouts"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Option 2: direct connection to cMix network","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pros: fastest performance"}),"\n",(0,r.jsx)(n.li,{children:"Cons: xx Network gateway nodes or anyone watching their traffic knows you're using xx Network (but not other details)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Connections to Web servers can also be routed via a Socks5 proxy or VPN:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Haven connection to xx Network",src:s(44829).A+"",width:"501",height:"282"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Option 3: access 3rd party Haven Web app via a proxy","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pros: client's IP address hidden from Speakeaasy Web server's owner"}),"\n",(0,r.jsx)(n.li,{children:"Cons: slower application start"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Option 4: access 3rd party Haven Web app directly","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pros: fastest application startup"}),"\n",(0,r.jsx)(n.li,{children:"Cons: Haven Web server's owner may identify your IP as xx Network user (but not other details, assuming the server is not compromised)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Option 5: access own Haven Web app (through HTTPS reverse proxy)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pros: does not reveal user's IP address to Haven Web server's operator; lowest risk of server take-over or compromise"}),"\n",(0,r.jsx)(n.li,{children:"Cons: requires TLS certificate, reverse HTTPS proxy, Haven Web server"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Option 6: Haven Web server in a VM or bare metal server with Node.js"}),"\n",(0,r.jsx)(n.li,{children:"Option 7: containerized Haven Web server"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"What else do Haven admins need to consider?"}),"\n",(0,r.jsx)(n.h2,{id:"clients-outgoing-network-connections",children:"Client's outgoing network connections"}),"\n",(0,r.jsx)(n.p,{children:"Haven client needs to connect to Haven Web server to download the app (normally, tcp/443 to reverse HTTPS proxy) and then only outgoing connections to xx Network (normally the gateway servers running at tcp/22480, perhaps initially to cMix permissioning, tcp/443)."}),"\n",(0,r.jsx)(n.p,{children:"These may be viewed in the browser or at OS level."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Haven client&#39;s netwwork connections",src:s(27375).A+"",width:"753",height:"556"})}),"\n",(0,r.jsx)(n.p,{children:"If Socks5 proxy or VPN proxy is used to protect client's IP address, one or both of these connection types may exist only between that proxy and Haven (or xx Network), while client may open several connections to its Socks5 proxy."}),"\n",(0,r.jsx)(n.h2,{id:"protect-haven-web-server-from-being-compromised-or-taken-over",children:"Protect Haven Web server from being compromised or taken over"}),"\n",(0,r.jsx)(n.p,{children:"The OS and application administrator(s) aim to keep Haven Web server from being compromised or taken over."}),"\n",(0,r.jsx)(n.p,{children:"A compromised server may result in code tampering and be used to compromise the clients, leak their IP addresses and more."}),"\n",(0,r.jsx)(n.h2,{id:"avoid-excessive-logging",children:"Avoid excessive logging"}),"\n",(0,r.jsx)(n.p,{children:"Excessive logging of client IP addresses doesn't protect their privacy."}),"\n",(0,r.jsx)(n.p,{children:"While that doesn't leak data, it exposes metadata (IP addresses) and may help identify Haven users. (This is still not enough to determine the participants in a conversation, let alone its contents, but slightly increases the risk.)"}),"\n",(0,r.jsx)(n.p,{children:"Client IP addresses may be logged by:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"OS (firewall, likely to log client IP if verbose logging is on)"}),"\n",(0,r.jsx)(n.li,{children:"Reverse (HTTPS) proxy (client IP is likely to be logged here)"}),"\n",(0,r.jsx)(n.li,{children:"Haven Web application (unlikely that client IP address-identifying information will be logged here)"}),"\n",(0,r.jsx)(n.li,{children:"Log, analytics, observability applications (if any logs are forwarded)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Do what you can to minimize or eliminate those."}),"\n",(0,r.jsx)(n.p,{children:"Remember that each Haven client can use a different (including own) Haven Web server instance, which minimizes the blast radius."}),"\n",(0,r.jsx)(n.p,{children:"One way to lessen the risk of client IP leaks is to run a public Haven Web server, which means more traffic and potentially other risks, but creates additional noise in terms of clients' IP addresses."}),"\n",(0,r.jsx)(n.p,{children:"Another is to encourage channel participants to use different Haven servers."})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},27375:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/speakeasy-client-network-connections-88f6e52ef1d476a1647e36a1c81aeef4.png"},79976:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/speakeasy-cmix-connection-e5f3084206d5f3068cc4526e6fd30d94.png"},53127:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/speakeasy-p2p-network-6efbf44564ddb966e01b1b2da0637914.png"},44829:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/speakeasy-web-connection-c0519142a9a93106af1d56cc76aad5e6.png"},27468:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var r=s(30758);const i={},t=r.createContext(i);function o(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);