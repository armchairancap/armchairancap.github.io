<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Install xx Network Haven | ArmchairAncap</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://armchairancap.github.io/img/aa-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://armchairancap.github.io/img/aa-social-card.jpg"><meta data-rh="true" property="og:url" content="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Install xx Network Haven | ArmchairAncap"><meta data-rh="true" name="description" content="Install your own instance of xx Network Haven application: bare metal, VM, or container"><meta data-rh="true" property="og:description" content="Install your own instance of xx Network Haven application: bare metal, VM, or container"><meta data-rh="true" name="keywords" content="xx network,speakeasy,docker,container,server,instance,haven"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-04-30T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/armchairancap"><meta data-rh="true" property="article:tag" content="xx network,haven,speakeasy"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven"><link data-rh="true" rel="alternate" href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven" hreflang="en"><link data-rh="true" rel="alternate" href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven","mainEntityOfPage":"https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven","url":"https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven","headline":"Install xx Network Haven","name":"Install xx Network Haven","description":"Install your own instance of xx Network Haven application: bare metal, VM, or container","datePublished":"2023-04-30T00:00:00.000Z","author":{"@type":"Person","name":"ArmchairAncap","url":"https://github.com/armchairancap","image":"https://github.com/armchairancap.png"},"keywords":["xx network","speakeasy","docker","container","server","instance","haven"],"isPartOf":{"@type":"Blog","@id":"https://armchairancap.github.io/blog","name":"Armchair Ancap Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ArmchairAncap RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ArmchairAncap Atom Feed">





<script src="https://cdn.counter.dev/script.js" async data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script><link rel="stylesheet" href="/assets/css/styles.2fac03d5.css">
<script src="/assets/js/runtime~main.62384191.js" defer="defer"></script>
<script src="/assets/js/main.88c4138e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_P9kZ" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="AA Logo" class="themedComponent_DpnF themedComponent--light_PVxb"><img src="/img/logo.svg" alt="AA Logo" class="themedComponent_DpnF themedComponent--dark_voz9"></div><b class="navbar__title text--truncate">ArmchairAncap</b></a><a class="navbar__item navbar__link" href="/docs/intro">Guides</a><a class="navbar__item navbar__link" href="/xx-directory">xx Directory</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="toggle_p44o colorModeToggle_koOA"><button class="clean-btn toggleButton_msoy toggleButtonDisabled_f80E" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_ZfZ4"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Nw1Y"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_EboH"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_jd_L"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_MFfy thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_XiwM margin-bottom--md">All posts</div><ul class="sidebarItemList_nmMD clean-list"><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2025/02/12/xx-anti-pool-pool-adds-two-nodes">Two xx validator nodes added to pool-blocking pool</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2025/02/09/xx-coin-in-supra-starkey-wallet">How to add WXX (ERC-20) xx coin to Supra StarKey</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2025/01/27/xx-network-armchairancap-pool-blocking-update">Update on pool-blocking progress</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2025/01/23/xx-network-armchairancap-pool-elected">First anti-pool pool node elected</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2025/01/06/xx-network-armchairancap-pool">An attempt to address validator centralization problem</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2025/01/04/xx-network-initial-validator-list-for-due-dilligence">First pass of nomination-worthy xx Network validators (2025/01/04)</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/12/31/xx-network-minimum-validator-stake-change">Notes before the change of minimum validator stake on xx Chain</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/12/17/buying-wxx-bep20-wrapped-xx-coin">How to buy WXX(BRC20)</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/12/15/why-polkadot-governance-sucks">Why Polkadot governance sucks</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/12/14/top-pq-quantum-resistant-coins-altcoin-daily">Top PQ crypto coins for 2025 (according to Altcoin Daily)</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/12/10/xx-referendum-id-27-min-validator-stake">xx Network referendum (ID 27) on hiking the minimum validator stake</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/12/08/good-samaritans-of-supra-network">Good Samaritans of Supra Network</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/12/07/nfts-on-xx-network">NFTs on xx Network</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/11/28/xx-validators-shall-we-play-a-game">xx Network validators, shall we play a game?</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/11/25/xx-network-and-polkadot-ecosystem">xx Network and Polkadot ecosystem</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/11/11/xx-chain-block-dumper">Dump xx Chain block contents with xxblockdumper</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/11/11/xx-dapps">Why dApps for xx Network</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2023/11/05/xx-network-asset-gated-access">NFT-gated access on xx Network</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/11/01/haven-comparison-notes">Notes on forked comparison of messengers</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/11/01/my-hacktober-2024-activites">Good Hacktoberfest 2024</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/10/29/xx-haven-with-tribler">xx Haven with Tribler</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/10/13/bip-utils-with-xx-network">Use BIP39 from bip-utils with xx Network</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/08/20/nym-vs-xxnetwork">A comparison between Nym and xx Network</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/08/16/worldcoin-xx-postage">Worldcoin and xx Network postage</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/06/06/xx-network-client-switches-to-pq-ctidh">xx Network client uses CTIDH PQ algo now</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/05/17/speakeasy-haven-private-event-chat">xx Network as private event chat in online Web events</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/05/08/can-securedrop-reinvent-the-wheel-probably-not">SecureDrop keeps themselves busy reinventing the wheel</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/04/11/sec-targets-uniswap-total-ban-in-view">First they came for CEXes, then for DEXes</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/04/06/i-like-wrapped-xx-coin">What I like about the Wrapped XX coin (WXX)</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/03/23/eu-legislation-untenable-for-privacy-coin-users">EU puts EU-based privacy coin users in untenable position</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2024/02/09/xx-network-cli-irc-like-client">How to use xx Network CLI</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2023/06/05/xx-network-chat-security-dot-txt">Case for xx Network chat link in security.txt</a></li><li class="sidebarItem_brLU"><a class="sidebarItemLink_PJxG" href="/blog/2023/05/08/xx-network-wallet-sign-verify">Sign and verify messages using xx Network wallet</a></li><li class="sidebarItem_brLU"><a aria-current="page" class="sidebarItemLink_PJxG sidebarItemLinkActive_RmN4" href="/blog/2023/04/30/install-xx-network-haven">Install xx Network Haven</a></li></ul></nav></aside><main class="col col--7"><article><header><h1 class="title_RyL6">Install xx Network Haven</h1><div class="container_d2a9 margin-vert--md"><time datetime="2023-04-30T00:00:00.000Z">April 30, 2023</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_tJ1H"><div class="avatar margin-bottom--sm"><a href="https://github.com/armchairancap" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/armchairancap.png" alt="ArmchairAncap"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/armchairancap" target="_blank" rel="noopener noreferrer"><span>ArmchairAncap</span></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><div class="theme-admonition theme-admonition-info admonition_UIiK alert alert--info"><div class="admonitionHeading_WVRp"><span class="admonitionIcon_lTvr"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent__ZrN"><p>For an updated how-to, see <a href="https://github.com/armchairancap/xx-haven-container/blob/master/README.md" target="_blank" rel="noopener noreferrer">xx Haven Container</a>.</p><p>The article below is still usable, but the repository is updated, while the article below is kept for archive purposes.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_U9DT" id="containerized-or-non-containerized-haven">Containerized or non-containerized Haven<a href="#containerized-or-non-containerized-haven" class="hash-link" aria-label="Direct link to Containerized or non-containerized Haven" title="Direct link to Containerized or non-containerized Haven">​</a></h2>
<p>It&#x27;s probably easier to run Haven in a container. If you have Docker or Postman and want to run Haven in a container, try <a href="https://github.com/armchairancap/xx-haven-container" target="_blank" rel="noopener noreferrer">this</a>.</p>
<p>In the case you want to self-host a non-containerized Haven, read on!</p>
<h2 class="anchor anchorWithStickyNavbar_U9DT" id="home-or-cloud">Home or cloud<a href="#home-or-cloud" class="hash-link" aria-label="Direct link to Home or cloud" title="Direct link to Home or cloud">​</a></h2>
<p>You may install Speakeasy at home or in the cloud.</p>
<p>Haven Web server doesn&#x27;t hold any data but its OS and Node.js logs may store client IPs, that&#x27;s all.</p>
<p>With that in mind, some high-level considerations would be:</p>
<ul>
<li>We don&#x27;t want our Speakeasy Web app or underlying OS to get compromised</li>
<li>If your Haven is not open to public, or is accessed &quot;by invite&quot; (maybe with basic authentication or VPN, for your family and friends), you may run it at home</li>
<li>If your Haven is located in the cloud, that&#x27;s acceptable as long as you can protect it from getting compromised so that application code doesn&#x27;t get replaced, OS compromised, or visitors&#x27; IPs leaked.</li>
</ul>
<p>Regarding this last point, if you feel comfortable hosting your Haven server in a small (1G RAM) VM, it is better to open it to public to have the Web server accessed by a variety of addresses. As long as you know how to protect the VM.</p>
<div class="theme-admonition theme-admonition-tip admonition_UIiK alert alert--success"><div class="admonitionHeading_WVRp"><span class="admonitionIcon_lTvr"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent__ZrN"><p>Each participant in a conversation can use a different Speakeasy Web server, so many deployment combinations are possible.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_U9DT" id="software-and-hardware-requirements">Software and hardware requirements<a href="#software-and-hardware-requirements" class="hash-link" aria-label="Direct link to Software and hardware requirements" title="Direct link to Software and hardware requirements">​</a></h2>
<p>Use a Linux OS or VM, x86_64 or ARM64 architecture. Haven&#x27;s hardware requirements are minimal:</p>
<ul>
<li>1 vCPU</li>
<li>1 GB RAM</li>
<li>3 GB disk</li>
</ul>
<p>All Haven app/web server does is serve the app to the client(s) and that&#x27;s one-time download from each client (around 100 MB download).</p>
<p>One vCPU is enough and won&#x27;t be significantly utilized except when Node.js builds the application or when container image is updated - that takes a long time (15 minutes), but has to be done only when Haven code is updated or rebuilt.</p>
<h2 class="anchor anchorWithStickyNavbar_U9DT" id="install-nodejs">Install Node.js<a href="#install-nodejs" class="hash-link" aria-label="Direct link to Install Node.js" title="Direct link to Install Node.js">​</a></h2>
<p>On generic Linux OS, follow installation instructions for <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer">Node.js</a> version 16.14 or above.</p>
<p>This post was prototyped on DietPi Linux, which currently uses Node.js 20. On DietPi, you may install Node.js as follows:</p>
<div class="language-sh codeBlockContainer_ecHN theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_Zx4T"><pre tabindex="0" class="prism-code language-sh codeBlock_fJJu thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_AmI_"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo dietpi-software install 9</span><br></span></code></pre><div class="buttonGroup_CiR6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ldCF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_gU9M"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cntW"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or, run <code>dietpi-software</code>, select <code>Search software</code>, search for <code>Node.js</code>, and proceed with installation.</p>
<h2 class="anchor anchorWithStickyNavbar_U9DT" id="deploy-and-run-speakeasy">Deploy and run Speakeasy<a href="#deploy-and-run-speakeasy" class="hash-link" aria-label="Direct link to Deploy and run Speakeasy" title="Direct link to Deploy and run Speakeasy">​</a></h2>
<p>We need to pick a directory for the application, clone the source to that directory, change some parameters and install.</p>
<div class="language-sh codeBlockContainer_ecHN theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_Zx4T"><pre tabindex="0" class="prism-code language-sh codeBlock_fJJu thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_AmI_"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo mkdir -p /usr/src/app/speakeasy/.next</span><br></span></code></pre><div class="buttonGroup_CiR6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ldCF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_gU9M"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cntW"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If your username is joe, you could run it as such. Otherwise, create a non-sudoer account and use that.</p>
<div class="language-sh codeBlockContainer_ecHN theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_Zx4T"><pre tabindex="0" class="prism-code language-sh codeBlock_fJJu thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_AmI_"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo chown -R joe:joe /usr/src/app/speakeasy</span><br></span></code></pre><div class="buttonGroup_CiR6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ldCF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_gU9M"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cntW"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That should allow you to run the rest without using <code>sudo</code>.</p>
<p>Next, clone the Haven source code, change configuration parameters and run it.</p>
<div class="language-sh codeBlockContainer_ecHN theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_Zx4T"><pre tabindex="0" class="prism-code language-sh codeBlock_fJJu thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_AmI_"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git clone https://git.xx.network/elixxir/speakeasy-web /usr/src/app/speakeasy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd /usr/src/app/speakeasy</span><br></span></code></pre><div class="buttonGroup_CiR6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ldCF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_gU9M"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cntW"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_U9DT" id="pick-haven-web-application-port">Pick Haven Web application port<a href="#pick-haven-web-application-port" class="hash-link" aria-label="Direct link to Pick Haven Web application port" title="Direct link to Pick Haven Web application port">​</a></h3>
<p>Most Node.js apps traditionally use port 3000, but you&#x27;ll need something else if you have another app using that port.</p>
<p>Pick a port for Haven, such as 7080, and use it consistently later:</p>
<div class="language-sh codeBlockContainer_ecHN theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_Zx4T"><pre tabindex="0" class="prism-code language-sh codeBlock_fJJu thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_AmI_"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sed -i &#x27;s/next start/next start -p 7080/g&#x27; package.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sed -i &#x27;s/const nextConfig = {/const nextConfig ={\\n  productionBrowserSourceMaps: true,/g&#x27; next.config.js</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rm -rf node_modules &amp;&amp; npm install -g npm@9.6.5 &amp;&amp; npm install &amp;&amp; npx next telemetry disable &amp;&amp; npx next build</span><br></span></code></pre><div class="buttonGroup_CiR6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ldCF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_gU9M"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cntW"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If that went well, you can try to start it from the same directory.</p>
<div class="language-sh codeBlockContainer_ecHN theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_Zx4T"><pre tabindex="0" class="prism-code language-sh codeBlock_fJJu thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_AmI_"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm start</span><br></span></code></pre><div class="buttonGroup_CiR6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ldCF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_gU9M"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cntW"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Check if Haven is up and running by going to <code>http://${SERVER_IP}:7080</code>. You may need to open OS firewall for that. Example for Ubuntu:</p>
<div class="language-sh codeBlockContainer_ecHN theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_Zx4T"><pre tabindex="0" class="prism-code language-sh codeBlock_fJJu thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_AmI_"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo ufw allow 7080/tcp</span><br></span></code></pre><div class="buttonGroup_CiR6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ldCF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_gU9M"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cntW"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Since that port doesn&#x27;t need to be exposed when Speakeasy is running behind HTTPS proxy, it is advisable to delete the rule after testing the application.</p>
<div class="language-sh codeBlockContainer_ecHN theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_Zx4T"><pre tabindex="0" class="prism-code language-sh codeBlock_fJJu thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_AmI_"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo ufw status numbered</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_CiR6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ldCF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_gU9M"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cntW"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You won&#x27;t be able to do much with Speakeasy running at <code>http://host:7080</code> because there&#x27;s no reverse HTTPS proxy in front of Speakeasy. If you attempt to create an identity you will get stuck at the <code>Find your Codename</code> step.</p>
<p>Assuming the rules for 7080/tcp are number 7 and 8, and your HTTPS reverse proxy will run on the same host, you can delete the rules: <code>sudo ufw delete 7 ; sudo ufw delete 8</code>.</p>
<p>The right firewall port to open on the <em>host</em> would be whatever port is used by your HTTPS reverse proxy (e.g. 14443).</p>
<div class="theme-admonition theme-admonition-tip admonition_UIiK alert alert--success"><div class="admonitionHeading_WVRp"><span class="admonitionIcon_lTvr"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent__ZrN"><p>To be fully functional, Haven must be accessed through an HTTPS reverse proxy.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_U9DT" id="reverse-https-proxy">Reverse HTTPS proxy<a href="#reverse-https-proxy" class="hash-link" aria-label="Direct link to Reverse HTTPS proxy" title="Direct link to Reverse HTTPS proxy">​</a></h2>
<p>Deploy reverse HTTPS proxy in front of Speakeasy so that external port is forwarded to Speakeasy&#x27;s application port (example: <code>https://fqdn:14443</code> -&gt; <code>http://localhost:7080</code>). To use 14443/tcp, open that firewall port on external network.</p>
<div class="language-sh codeBlockContainer_ecHN theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_Zx4T"><pre tabindex="0" class="prism-code language-sh codeBlock_fJJu thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_AmI_"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo ufw allow 14443/tcp</span><br></span></code></pre><div class="buttonGroup_CiR6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ldCF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_gU9M"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cntW"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now configure HTTPS reverse proxy to forward incoming 14443/tcp to 7080/tcp, and if you wish make HTTPS reverse proxy and Speakeasy Web app start (<code>npm start</code>) automatically.</p>
<p>For that you may use Caddy, Traefik, NGINX or other.</p>
<p>There are many ways to deploy each reverse proxy and at the same time there are no Speakeasy-specific steps here, so the details are an exercise for the reader. Find and try the official or community examples for your proxy and Node.js.</p>
<h3 class="anchor anchorWithStickyNavbar_U9DT" id="custom-port-host-or-path">Custom port, host or path<a href="#custom-port-host-or-path" class="hash-link" aria-label="Direct link to Custom port, host or path" title="Direct link to Custom port, host or path">​</a></h3>
<p>In the case Speakeasy is the only application proxied by HTTPS reverse proxy, it is most convenient to expose it at <code>https://host:443</code>.</p>
<p>In the case the same HTTPS reverse proxy is used for several applications, Speakeasy can be hosted in a directory (or, more complicated, at a dedicated virtual host name or FQDN).</p>
<h3 class="anchor anchorWithStickyNavbar_U9DT" id="tls-certificate">TLS certificate<a href="#tls-certificate" class="hash-link" aria-label="Direct link to TLS certificate" title="Direct link to TLS certificate">​</a></h3>
<p>In any and all cases, your reverse HTTPS proxy would need a TLS certificate.</p>
<p>If your reverse proxy integrates with Let&#x27;s Encrypt, you could expose reverse proxy (and indirectly Speakeasy) to the Internet rather than use internal or even self-signed TLS certificate - it&#x27;s more secure, especially if you additionally protect HTTPS proxy with firewall rules or basic (or other) authentication.</p>
<p>Haven Web server doesn&#x27;t host any account or chat data. If you expose Speakeasy to the Internet, the main concern is to prevent NodeJS from application server take-over and tampering, so it can be advantageous to run it using a limited local account, and optionally add some form of authentication to your HTTPS proxy.</p>
<p>Once a TLS-enabled proxy is functional, you can access Haven, create a new codename or import existing, and start using Haven.</p>
<h2 class="anchor anchorWithStickyNavbar_U9DT" id="update-haven">Update Haven<a href="#update-haven" class="hash-link" aria-label="Direct link to Update Haven" title="Direct link to Update Haven">​</a></h2>
<p>As mentioned before, Haven can be simply wiped and re-installed because only serves the application code and does not store any client data.</p>
<p>The official instance (haven.xx.network) normally runs the latest version, so visit that site from time to time, or watch the Speakeasy repository for new releases, or follow xx Network on Twitter.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_i4In padding--none margin-left--sm"><li class="tag_pKY9"><a class="tag_npp9 tagRegular_LeBw" href="/blog/tags/xx-network">xx network</a></li><li class="tag_pKY9"><a class="tag_npp9 tagRegular_LeBw" href="/blog/tags/haven">haven</a></li><li class="tag_pKY9"><a class="tag_npp9 tagRegular_LeBw" href="/blog/tags/speakeasy">speakeasy</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2023/05/08/xx-network-wallet-sign-verify"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Sign and verify messages using xx Network wallet</div></a></nav></main><div class="col col--2"><div class="tableOfContents_Zy6o thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#containerized-or-non-containerized-haven" class="table-of-contents__link toc-highlight">Containerized or non-containerized Haven</a></li><li><a href="#home-or-cloud" class="table-of-contents__link toc-highlight">Home or cloud</a></li><li><a href="#software-and-hardware-requirements" class="table-of-contents__link toc-highlight">Software and hardware requirements</a></li><li><a href="#install-nodejs" class="table-of-contents__link toc-highlight">Install Node.js</a></li><li><a href="#deploy-and-run-speakeasy" class="table-of-contents__link toc-highlight">Deploy and run Speakeasy</a><ul><li><a href="#pick-haven-web-application-port" class="table-of-contents__link toc-highlight">Pick Haven Web application port</a></li></ul></li><li><a href="#reverse-https-proxy" class="table-of-contents__link toc-highlight">Reverse HTTPS proxy</a><ul><li><a href="#custom-port-host-or-path" class="table-of-contents__link toc-highlight">Custom port, host or path</a></li><li><a href="#tls-certificate" class="table-of-contents__link toc-highlight">TLS certificate</a></li></ul></li><li><a href="#update-haven" class="table-of-contents__link toc-highlight">Update Haven</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Local resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorials and guides</a></li><li class="footer__item"><a class="footer__link-item" href="/xx-directory">xx Network directory</a></li><li class="footer__item"><a href="https://armchairancap.github.io/xx-network-haven-comparison/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Encrypted messenger comparison</a></li></ul></div><div class="col footer__col"><div class="footer__title">External resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://forum.xx.network" target="_blank" rel="noopener noreferrer" class="footer__link-item">xx Network Community Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_J_Gs"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://learn.xx.network" target="_blank" rel="noopener noreferrer" class="footer__link-item">xx Network Learning Center</a></li><li class="footer__item"><a href="https://haven.xx.network/join?0Name=xxGeneralChat&amp;1Description=Talking+about+the+xx+network&amp;2Level=Public&amp;3Created=1674152234202224215&amp;e=%2FqE8BEgQQkXC6n0yxeXGQjvyklaRH6Z%2BWu8qvbFxiuw%3D&amp;k=RMfN%2B9pD%2FJCzPTIzPk%2Bpf0ThKPvI425hye4JqUxi3iA%3D&amp;l=368&amp;m=0&amp;p=1&amp;s=rb%2BrK0HsOYcPpTF6KkpuDWxh7scZbj74kVMHuwhgUR0%3D&amp;v=1" target="_blank" rel="noopener noreferrer" class="footer__link-item">xx Network Haven (xxGeneralChat)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_J_Gs"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Twitter</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/xx_network" target="_blank" rel="noopener noreferrer" class="footer__link-item">xx Network on Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_J_Gs"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/mises" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mises Institute<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_J_Gs"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ArmchairAncap" target="_blank" rel="noopener noreferrer" class="footer__link-item">ArmchairAncap<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_J_Gs"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 (CC-BY) by ArmchairAncap. Home page art © by Undraw.</div></div></div></footer></div>
</body>
</html>