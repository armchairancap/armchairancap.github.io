<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://armchairancap.github.io/blog</id>
    <title>ArmchairAncap Blog</title>
    <updated>2024-02-09T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://armchairancap.github.io/blog"/>
    <subtitle>ArmchairAncap Blog</subtitle>
    <icon>https://armchairancap.github.io/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[Use xx Network CLI]]></title>
        <id>https://armchairancap.github.io/blog/2024/02/09/xx-network-cli-irc-like-client</id>
        <link href="https://armchairancap.github.io/blog/2024/02/09/xx-network-cli-irc-like-client"/>
        <updated>2024-02-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[How to get started with xx Network CLI client]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="https://armchairancap.github.io/blog/2024/02/09/xx-network-cli-irc-like-client#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>xx Network is a privacy-focused, quantum-resistant "small messaging" network.</p>
<p>By "small messaging" I mean up to KB-sized messages, although it's possible to use larger messages as well. For example, xx Messenger supports small attachments (tens of KB).</p>
<p>xx CLI client is a reference client implementation for xx Network that at this time uses the older "broadcast module layer" approach.</p>
<p>Speakeasy (Haven) or Echoexx use a better approach (channels), but all of them use the xx Network SDK (xxDK).</p>
<p>xx CLI client repository has a read-me file that contains almost all the steps required to get started, but this post can still save you some time.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build">Build<a href="https://armchairancap.github.io/blog/2024/02/09/xx-network-cli-irc-like-client#build" class="hash-link" aria-label="Direct link to Build" title="Direct link to Build">​</a></h2>
<p>At this time we need <code>go1.21</code>, but check the source to verify if this requirement changed.</p>
<p>These steps are for Linux. Check the repository's read-me file for other OS.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://git.xx.network/elixxir/cli-client </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> cli-client/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go mod vendor </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> go mod tidy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GOOS</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">linux </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GOARCH</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">amd64 go build </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-ldflags</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'-w -s'</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-o</span><span class="token plain"> xx-client main.go</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use">Use<a href="https://armchairancap.github.io/blog/2024/02/09/xx-network-cli-irc-like-client#use" class="hash-link" aria-label="Direct link to Use" title="Direct link to Use">​</a></h2>
<p>Let's see how to use xx CLI client.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="first-user">First user<a href="https://armchairancap.github.io/blog/2024/02/09/xx-network-cli-irc-like-client#first-user" class="hash-link" aria-label="Direct link to First user" title="Direct link to First user">​</a></h3>
<p>Someone needs to create a channel.</p>
<p>The first step is to do that with <code>--new</code>, and give it a name and description.</p>
<p>Setup procedure creates 2 files you need to know about:</p>
<ul>
<li>the first one is the channel definition file by default named $CHANNEL.xxchan (here, <code>test.xxchan</code>)</li>
<li>the second is a private RSA key for the creator who is also channel admin. This one is by default named <code>$CHANNEL-privateKey.pem</code> (here, <code>test-privateKey.pem</code>).</li>
</ul>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">NICK</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"my-Name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./xx-client broadcast </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--new</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-o</span><span class="token plain"> test.xxchan </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-n</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"test"</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-d</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"Some desc"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./xx-client broadcast </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--load</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-o</span><span class="token plain"> test.xxchan </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-u</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$NICK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./xx-client.linux64 broadcast </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--load</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-o</span><span class="token plain"> test.xxchan </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-u</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$NICK</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--waitTimeout</span><span class="token plain"> 120s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The default wait timeout value wasn't enough, so I extended it.</p>
<p>The reason is lately some xx Network gateway nodes had difficulties (potentially due to government interference in some countries) which makes it harder to connect. There's a log file which you can tail from another terminal to see that.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="second-user">Second user<a href="https://armchairancap.github.io/blog/2024/02/09/xx-network-cli-irc-like-client#second-user" class="hash-link" aria-label="Direct link to Second user" title="Direct link to Second user">​</a></h3>
<p>The second user needs the channel file, as there's no way to communicate channel name without it. Share it through Signal or using some other way that you find secure.</p>
<p>The second user would normally have another nickname (although they're really identified by their private key) and needs to only load the channel, not create it.</p>
<p>Here we'll create the RSA key manually before we start (as we don't need to create a channel). This also means you can reuse existing RSA key if you have it.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">NICK</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"AnotherGuy"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ssh-keygen </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-t</span><span class="token plain"> rsa</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># move your new private key to the default private key file name (for the channel "test") for easier loading</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> test-privateKey.pub test-privateKey.pem</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./xx-client.linux64 broadcast </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--load</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-o</span><span class="token plain"> test.xxchan </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-u</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$NICK</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--waitTimeout</span><span class="token plain"> 120s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And that is it!</p>
<p><img decoding="async" loading="lazy" alt="xx Network CLI" src="https://armchairancap.github.io/assets/images/xx-network-cli-01-6e07a831e1d030e170512290fedaf730.png" width="1351" height="848" class="img_ev3q"></p>
<p>There are minor console-related bugs, and you'll need to reconnect (simply CTRL+C and then restart) if you get disconnected.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-details">Other details<a href="https://armchairancap.github.io/blog/2024/02/09/xx-network-cli-irc-like-client#other-details" class="hash-link" aria-label="Direct link to Other details" title="Direct link to Other details">​</a></h2>
<p>There are other details that you can find from online help, or by inspecting the code.</p>
<div class="language-raw codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-raw codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Available Commands:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  broadcast   Create or join broadcast channels.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  completion  Generate the autocompletion script for the specified shell</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  generate    Generates version and dependency information for the binary.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  help        Help about any command</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  version     Print the version and dependency information for the binary.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Flags:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -c, --config string          Path to YAML file with custom configuration..</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -h, --help                   help for cli-client</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -v, --logLevel int           Verbosity level for log printing (2+ = Trace, 1 = Debug, 0 = Info).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -l, --logPath string         File path to save log file to. (default "cli-client.log")</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --ndf string             Path to the network definition JSON file. By default, the prepacked NDF is used.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -p, --password string        Password to the session file.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -s, --session string         Sets the initial storage directory for client session data. (default "session")</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --waitTimeout duration   Duration to wait for messages to arrive. (default 15s)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases">Use cases<a href="https://armchairancap.github.io/blog/2024/02/09/xx-network-cli-irc-like-client#use-cases" class="hash-link" aria-label="Direct link to Use cases" title="Direct link to Use cases">​</a></h2>
<p>xx CLI client cannot communicate with Speakeasy or Echoexx - as noted earlier, these use different module of xxDK.</p>
<p>But it can be useful on its own. Some examples:</p>
<ul>
<li>secure &amp; private DM or group chat client for headless and remote systems without X Window System - like IRC, but with fewer features and more secure and private</li>
<li>share IT-related secrets such as passwords and .env files with yourself or colleagues: load channel file, start the client, send or receive secrets and then delete the entire directory on the temporary client</li>
</ul>
<p>A bit more on this last use case. You should use encrypted boot volume or change the secret if it's critical, as it's not technically possible to shred/wipe a single file on an unencrypted flash disk. For this use case you need to be able to get out to the Internet which is often, but not always (e.g. LAN) possible.</p>
<p>There are CLI scripts for "secure" password sharing, but they rely on personal infrastructure (some server &amp; DB which may or may not be secure), or 3rd party infrastructure which may or may not be more secure than xx Network (and often doesn't have open source code on both the server and client).</p>
<p>There's also Tailscale, but again - to be equally secure, you still have to encrypt your data before sending it and probably at-rest as well (considering that the client is "online" at all times). If you can make use of Tailscale for other things that's great, but if you need something quick - like when setting up some VMs in the cloud - xx CLI client could be good enough.</p>
<p>xx CLI client could also be modified for other purposes, for example as a low censorship-free broadcast tool without the need for Tor (which may be blocked anyway). xx Network can also be blocked, but most locations and corporate firewalls haven't done it yet.</p>
<p>As of now, xx Network gateways retain client side-encrypted data for 21 days, after which it expires and may be found only on the clients (if they logged in and downloaded it before it expired). So, keep in mind that you may shred the local session file, channel file and private key to disable access locally, while chat data stored on xx Network gateways expires in weeks. What you cannot delete is messages other clients received on their side.</p>]]></content>
        <author>
            <name>ArmchairAncap</name>
            <uri>https://github.com/armchairancap</uri>
        </author>
        <category label="xx network" term="xx network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Case for xx Network chat link in security.txt]]></title>
        <id>https://armchairancap.github.io/blog/2023/06/05/xx-network-chat-security-dot-txt</id>
        <link href="https://armchairancap.github.io/blog/2023/06/05/xx-network-chat-security-dot-txt"/>
        <updated>2023-06-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Case for xx Network Haven chat link in security.txt]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="securitytxt">security.txt<a href="https://armchairancap.github.io/blog/2023/06/05/xx-network-chat-security-dot-txt#securitytxt" class="hash-link" aria-label="Direct link to security.txt" title="Direct link to security.txt">​</a></h2>
<p>The Dutch Digital Trust Center mandates that all government sites must have a security files under the <code>.well-known</code> directory located at the root of Web site.</p>
<p>Use cases:</p>
<ul>
<li>Go-to place to get information on how to report vulnerabilities affecting the site or organization</li>
<li>Improve the speed of getting in touch</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="https://armchairancap.github.io/blog/2023/06/05/xx-network-chat-security-dot-txt#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h2>
<p><a href="https://www.ncsc.nl/.well-known/security.txt" target="_blank" rel="noopener noreferrer">https://www.ncsc.nl/.well-known/security.txt</a> captured on Jun 1, 2023.</p>
<div class="language-raw codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-raw codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-----BEGIN PGP SIGNED MESSAGE-----</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Hash: SHA512</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Domeinen van de Rijksoverheid kunnen met een 302 redirect verwijzen naar</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># het centrale bestand op https://www.ncsc.nl/.well-known/security.txt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># omdat het NCSC het centrale meldpunt is voor kwetsbaarheden en incidenten</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># voor de Rijksoverheid.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Dutch central government domains can redirect to the central file located</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># at https://www.ncsc.nl/.well-known/security.txt with a 302 redirect,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># because NCSC-NL is the central point of contact for vulnerabilities and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># incidents for the Dutch central government.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Expires: 2024-01-31T22:59:00.000Z</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Canonical: https://www.ncsc.nl/.well-known/security.txt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Policy: https://www.ncsc.nl/contact/kwetsbaarheid-melden</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Policy: https://english.ncsc.nl/contact/reporting-a-vulnerability-cvd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Contact: https://www.ncsc.nl/contact/kwetsbaarheid-melden</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Contact: https://english.ncsc.nl/contact/reporting-a-vulnerability-cvd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Contact: mailto:security@ncsc.nl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Encryption: https://www.ncsc.nl/contact/pgp-key</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Preferred-Languages: nl, en</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Acknowledgments: https://www.ncsc.nl/wall-of-fame</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Hiring: https://www.werkenvoornederland.nl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-----BEGIN PGP SIGNATURE-----</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Version: Encryption Desktop 10.4.2 (Build 1298)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Charset: utf-8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wsDVAwUBY+9c0P4Vd0fJc7lbAQpUmQwAwZ1vWyI1VKBChsciufRcvxy5zzMZMx6v</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">YjD5CXuDV4GL+tRl7wClnQO023e3ZChTH69y7O3veS+5/zNVUvpyqJfS8pNzG0pA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">B4vea3fQ41t5UpCVYvPopIFiT1oeQJA9w4NqBD2+2jW5lS5L8k9xz192gWJvhxq8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mTukJXYDiJLzxKbUMHEG2GNaMeoRj5Pvgr8buzQELP0VZHfzF05Hr6NOoWvS6SRX</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">KGW6rgg6fEUPcMTjBqn6gL/w82FXwrh93AmYkP/sBWP4It3NpbiNuazc5iynhhih</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">+ZlfzsFV6agF4MZR0IQZ6X4jsCxKFrPIWW51/7W+PIDkqy6za/bDjDeiinid0HOC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2rro6N9FXSyxHz9nteMppd+YMTCt+Z67HONsssR+7ojxORGOs0rTcjUucaVikFJQ</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wAls9p+vuIzFRViQaXe3Nndspr1cCIu4z3ZfdkcWREQP7acOjNgbmeQOlH4jnYWq</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lNVMWzOncidAWM0nXcuYTjZagRAagthF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=yC4A</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-----END PGP SIGNATURE-----</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-case-for-haven">Use case for Haven<a href="https://armchairancap.github.io/blog/2023/06/05/xx-network-chat-security-dot-txt#use-case-for-haven" class="hash-link" aria-label="Direct link to Use case for Haven" title="Direct link to Use case for Haven">​</a></h2>
<ul>
<li>security.txt is PGP-signed to confirm that it was signed by the key owner and that's fine. But in reality most people hate to use it to compose emails or messages</li>
<li>it is time-consuming for the recipient to download every sender's key which also delays reading encrypted messages</li>
<li>Haven gives the reporter anonymity, both parties enjoy encryption and privacy, and can interact in real time (and still move to email if they so choose)</li>
<li>Haven uses quantum-resistant encryption (I haven't checked, but it should be superior to PGP)</li>
</ul>
<p>Haven public chat link can be added to security.txt. Example:</p>
<div class="language-raw codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-raw codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Chat: https://.............. (security vulnerabilities only)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Contact: email - mailto:.........; chat - send DM to `aCertainTestifier`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Encryption: https://www..../contact/pgp-key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Because public chat could have several permanently present strangers in it, direct messages (DM) should be sent to contact person.</p>
<p>What are the weaknesses of using Haven here?</p>
<p>The way I see it, the biggest is that xx Network keeps messages for 21 days and then they disappear. To prevent the situation where nothing happens for three weeks and messages disappear, the reporting person should move on to email if no response is received within hours.</p>
<p>With time, spam may become a problem for Haven. But it is already a problem for email now, so Haven is not worse.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://armchairancap.github.io/blog/2023/06/05/xx-network-chat-security-dot-txt#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>Haven uses xx Network to store encrypted messages and Haven users can connect to xx Network from any (trusted) application server - whether it's container on own desktop client, the official Haven instance, etc.</p>
<p>Compared to an email or Web service as means of communication, Haven is less likely to be affected by a vulnerability at the same time as your corporate email or Web service, so it is a cost-free, "out-of-band" solution that's more resistant to unplanned concurrent downtime or DDoS.</p>
<p>Haven gives you zero maintenance, quantum-resistant encryption, superior privacy (compared to email and PGP), and far more convenience.</p>]]></content>
        <author>
            <name>ArmchairAncap</name>
            <uri>https://github.com/armchairancap</uri>
        </author>
        <category label="xx network" term="xx network"/>
        <category label="haven" term="haven"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Sign and verify messages using xx Network wallet]]></title>
        <id>https://armchairancap.github.io/blog/2023/05/08/xx-network-wallet-sign-verify</id>
        <link href="https://armchairancap.github.io/blog/2023/05/08/xx-network-wallet-sign-verify"/>
        <updated>2023-05-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Use the official xx Network Web wallet to sign and verify messages]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sign">Sign<a href="https://armchairancap.github.io/blog/2023/05/08/xx-network-wallet-sign-verify#sign" class="hash-link" aria-label="Direct link to Sign" title="Direct link to Sign">​</a></h2>
<p>Go to <code>Developer</code> &gt; <code>Sign and Verify</code> &gt; <code>Sign message</code></p>
<p>Pick an address ("wallet") to use and enter a message or other data you wish to sign with your wallet key to <code>sign the following data</code>.</p>
<p>This may be any text such as your Speakeasy codename, email address, etc.</p>
<p><img decoding="async" loading="lazy" alt="Sign message from xx Network wallet" src="https://armchairancap.github.io/assets/images/xx-network-wallet-sign-8da08f66d9202f2b160d42ac4464eff5.png" width="710" height="402" class="img_ev3q"></p>
<p>Click on the copy icon to copy the signature (<code>signature of supplied data</code>) to clipboard.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="verify">Verify<a href="https://armchairancap.github.io/blog/2023/05/08/xx-network-wallet-sign-verify#verify" class="hash-link" aria-label="Direct link to Verify" title="Direct link to Verify">​</a></h2>
<p>To verify, go to <code>Verify signature</code> rather than <code>Sign and Verify</code>.</p>
<p><code>Verify using address</code> means the signer's wallet address (so, usually not your own).</p>
<p>You need to provide the same wallet and message that you got, and if everything checks out, the icon next to <code>the supplied signature</code> will become a green check mark.</p>
<p>Bad signatures will fail to verify.</p>
<p><img decoding="async" loading="lazy" alt="Bad signature fails to verify" src="https://armchairancap.github.io/assets/images/xx-network-wallet-verify-bad-hash-0663fee410bf7df525709e93e80dfa63.png" width="710" height="402" class="img_ev3q"></p>
<p>Bad data will also fail to verify against a correct signature.</p>
<p><img decoding="async" loading="lazy" alt="Correct signature and content verify" src="https://armchairancap.github.io/assets/images/xx-network-wallet-verify-incomplete-f059411c8c7f93b658bd86ccde36d043.png" width="710" height="402" class="img_ev3q"></p>
<p>To be successful, verification requires the same wallet, message data and signature that were used to generate the signature.</p>
<p><img decoding="async" loading="lazy" alt="Correct verification" src="https://armchairancap.github.io/assets/images/xx-network-wallet-verify-f61496bae4a508271925217cf5c3356e.png" width="710" height="402" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="non-deterministic-signatures">Non-deterministic signatures<a href="https://armchairancap.github.io/blog/2023/05/08/xx-network-wallet-sign-verify#non-deterministic-signatures" class="hash-link" aria-label="Direct link to Non-deterministic signatures" title="Direct link to Non-deterministic signatures">​</a></h2>
<p>xx Network uses Schnorrkel (sr25519) which doesn't create deterministic signatures.</p>
<p>For example, I created two additional signatures. Each time I got a valid, but different, signature to what I got in the first attempt.</p>
<ul>
<li><code>0x2a40ed0.......3187</code></li>
<li><code>0xdec0ed9.......b78f</code></li>
</ul>]]></content>
        <author>
            <name>ArmchairAncap</name>
            <uri>https://github.com/armchairancap</uri>
        </author>
        <category label="xx network" term="xx network"/>
        <category label="sign" term="sign"/>
        <category label="verify" term="verify"/>
        <category label="wallet" term="wallet"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Install xx Network Haven]]></title>
        <id>https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven</id>
        <link href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven"/>
        <updated>2023-04-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Install your own instance of xx Network Haven application: bare metal, VM, or container]]></summary>
        <content type="html"><![CDATA[<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>For an updated how-to, see <a href="https://github.com/armchairancap/xx-haven-container/blob/master/README.md" target="_blank" rel="noopener noreferrer">xx Haven Container</a>.</p><p>The article below is still usable, but the repository is updated, while the article below is kept for archive purposes.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="containerized-or-non-containerized-haven">Containerized or non-containerized Haven<a href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven#containerized-or-non-containerized-haven" class="hash-link" aria-label="Direct link to Containerized or non-containerized Haven" title="Direct link to Containerized or non-containerized Haven">​</a></h2>
<p>It's probably easier to run Haven in a container. If you have Docker or Postman and want to run Haven in a container, try <a href="https://github.com/armchairancap/xx-haven-container" target="_blank" rel="noopener noreferrer">this</a>.</p>
<p>In the case you want to self-host a non-containerized Haven, read on!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="home-or-cloud">Home or cloud<a href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven#home-or-cloud" class="hash-link" aria-label="Direct link to Home or cloud" title="Direct link to Home or cloud">​</a></h2>
<p>You may install Speakeasy at home or in the cloud.</p>
<p>Haven Web server doesn't hold any data but its OS and Node.js logs may store client IPs, that's all.</p>
<p>With that in mind, some high-level considerations would be:</p>
<ul>
<li>We don't want our Speakeasy Web app or underlying OS to get compromised</li>
<li>If your Haven is not open to public, or is accessed "by invite" (maybe with basic authentication or VPN, for your family and friends), you may run it at home</li>
<li>If your Haven is located in the cloud, that's acceptable as long as you can protect it from getting compromised so that application code doesn't get replaced, OS compromised, or visitors' IPs leaked.</li>
</ul>
<p>Regarding this last point, if you feel comfortable hosting your Haven server in a small (1G RAM) VM, it is better to open it to public to have the Web server accessed by a variety of addresses. As long as you know how to protect the VM.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Each participant in a conversation can use a different Speakeasy Web server, so many deployment combinations are possible.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="software-and-hardware-requirements">Software and hardware requirements<a href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven#software-and-hardware-requirements" class="hash-link" aria-label="Direct link to Software and hardware requirements" title="Direct link to Software and hardware requirements">​</a></h2>
<p>Use a Linux OS or VM, x86_64 or ARM64 architecture. Haven's hardware requirements are minimal:</p>
<ul>
<li>1 vCPU</li>
<li>1 GB RAM</li>
<li>3 GB disk</li>
</ul>
<p>All Haven app/web server does is serve the app to the client(s) and that's one-time download from each client (around 100 MB download).</p>
<p>One vCPU is enough and won't be significantly utilized except when Node.js builds the application or when container image is updated - that takes a long time (15 minutes), but has to be done only when Haven code is updated or rebuilt.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-nodejs">Install Node.js<a href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven#install-nodejs" class="hash-link" aria-label="Direct link to Install Node.js" title="Direct link to Install Node.js">​</a></h2>
<p>On generic Linux OS, follow installation instructions for <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer">Node.js</a> version 16.14 or above.</p>
<p>This post was prototyped on DietPi Linux, which currently uses Node.js 20. On DietPi, you may install Node.js as follows:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> dietpi-software </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or, run <code>dietpi-software</code>, select <code>Search software</code>, search for <code>Node.js</code>, and proceed with installation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-and-run-speakeasy">Deploy and run Speakeasy<a href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven#deploy-and-run-speakeasy" class="hash-link" aria-label="Direct link to Deploy and run Speakeasy" title="Direct link to Deploy and run Speakeasy">​</a></h2>
<p>We need to pick a directory for the application, clone the source to that directory, change some parameters and install.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-p</span><span class="token plain"> /usr/src/app/speakeasy/.next</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If your username is joe, you could run it as such. Otherwise, create a non-sudoer account and use that.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">chown</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-R</span><span class="token plain"> joe:joe /usr/src/app/speakeasy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That should allow you to run the rest without using <code>sudo</code>.</p>
<p>Next, clone the Haven source code, change configuration parameters and run it.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://git.xx.network/elixxir/speakeasy-web /usr/src/app/speakeasy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /usr/src/app/speakeasy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pick-haven-web-application-port">Pick Haven Web application port<a href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven#pick-haven-web-application-port" class="hash-link" aria-label="Direct link to Pick Haven Web application port" title="Direct link to Pick Haven Web application port">​</a></h3>
<p>Most Node.js apps traditionally use port 3000, but you'll need something else if you have another app using that port.</p>
<p>Pick a port for Haven, such as 7080, and use it consistently later:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sed</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-i</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'s/next start/next start -p 7080/g'</span><span class="token plain"> package.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sed</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-i</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'s/const nextConfig = {/const nextConfig ={\\n  productionBrowserSourceMaps: true,/g'</span><span class="token plain"> next.config.js</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-rf</span><span class="token plain"> node_modules </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-g</span><span class="token plain"> npm@9.6.5 </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> npx next telemetry disable </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> npx next build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If that went well, you can try to start it from the same directory.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Check if Haven is up and running by going to <code>http://${SERVER_IP}:7080</code>. You may need to open OS firewall for that. Example for Ubuntu:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> ufw allow </span><span class="token number" style="color:rgb(247, 140, 108)">7080</span><span class="token plain">/tcp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Since that port doesn't need to be exposed when Speakeasy is running behind HTTPS proxy, it is advisable to delete the rule after testing the application.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> ufw status numbered</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You won't be able to do much with Speakeasy running at <code>http://host:7080</code> because there's no reverse HTTPS proxy in front of Speakeasy. If you attempt to create an identity you will get stuck at the <code>Find your Codename</code> step.</p>
<p>Assuming the rules for 7080/tcp are number 7 and 8, and your HTTPS reverse proxy will run on the same host, you can delete the rules: <code>sudo ufw delete 7 ; sudo ufw delete 8</code>.</p>
<p>The right firewall port to open on the <em>host</em> would be whatever port is used by your HTTPS reverse proxy (e.g. 14443).</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>To be fully functional, Haven must be accessed through an HTTPS reverse proxy.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reverse-https-proxy">Reverse HTTPS proxy<a href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven#reverse-https-proxy" class="hash-link" aria-label="Direct link to Reverse HTTPS proxy" title="Direct link to Reverse HTTPS proxy">​</a></h2>
<p>Deploy reverse HTTPS proxy in front of Speakeasy so that external port is forwarded to Speakeasy's application port (example: <code>https://fqdn:14443</code> -&gt; <code>http://localhost:7080</code>). To use 14443/tcp, open that firewall port on external network.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> ufw allow </span><span class="token number" style="color:rgb(247, 140, 108)">14443</span><span class="token plain">/tcp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now configure HTTPS reverse proxy to forward incoming 14443/tcp to 7080/tcp, and if you wish make HTTPS reverse proxy and Speakeasy Web app start (<code>npm start</code>) automatically.</p>
<p>For that you may use Caddy, Traefik, NGINX or other.</p>
<p>There are many ways to deploy each reverse proxy and at the same time there are no Speakeasy-specific steps here, so the details are an exercise for the reader. Find and try the official or community examples for your proxy and Node.js.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-port-host-or-path">Custom port, host or path<a href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven#custom-port-host-or-path" class="hash-link" aria-label="Direct link to Custom port, host or path" title="Direct link to Custom port, host or path">​</a></h3>
<p>In the case Speakeasy is the only application proxied by HTTPS reverse proxy, it is most convenient to expose it at <code>https://host:443</code>.</p>
<p>In the case the same HTTPS reverse proxy is used for several applications, Speakeasy can be hosted in a directory (or, more complicated, at a dedicated virtual host name or FQDN).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tls-certificate">TLS certificate<a href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven#tls-certificate" class="hash-link" aria-label="Direct link to TLS certificate" title="Direct link to TLS certificate">​</a></h3>
<p>In any and all cases, your reverse HTTPS proxy would need a TLS certificate.</p>
<p>If your reverse proxy integrates with Let's Encrypt, you could expose reverse proxy (and indirectly Speakeasy) to the Internet rather than use internal or even self-signed TLS certificate - it's more secure, especially if you additionally protect HTTPS proxy with firewall rules or basic (or other) authentication.</p>
<p>Haven Web server doesn't host any account or chat data. If you expose Speakeasy to the Internet, the main concern is to prevent NodeJS from application server take-over and tampering, so it can be advantageous to run it using a limited local account, and optionally add some form of authentication to your HTTPS proxy.</p>
<p>Once a TLS-enabled proxy is functional, you can access Haven, create a new codename or import existing, and start using Haven.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="update-haven">Update Haven<a href="https://armchairancap.github.io/blog/2023/04/30/install-xx-network-haven#update-haven" class="hash-link" aria-label="Direct link to Update Haven" title="Direct link to Update Haven">​</a></h2>
<p>As mentioned before, Haven can be simply wiped and re-installed because only serves the application code and does not store any client data.</p>
<p>The official instance at speakeasy.tech usually runs the latest version, so visit that site from time to time, or watch the Speakeasy repository for new releases, or follow xx Network on Twitter.</p>]]></content>
        <author>
            <name>ArmchairAncap</name>
            <uri>https://github.com/armchairancap</uri>
        </author>
        <category label="xx network" term="xx network"/>
        <category label="haven" term="haven"/>
        <category label="speakeasy" term="speakeasy"/>
    </entry>
</feed>